/* ============================================================== */

/* variable section */

.nav {
    --nav-height: var(--page-header-height);
    --nav-bg-color: var(--page-header-bg-color);

    --nav-animation: 0.3s var(--page-animation-func);
    --nav-animation-delay: var(--page-animation-delay);

    --nav-number-elem-first-column: 3;
}

/* ============================================================== */

/* style section */

.nav {
    display: block;
}

.nav__list {
    display: flex;
    flex-flow: row nowrap;
    justify-content: space-around;
    align-items: flex-start;
    position: static;
    background-color: var(--nav-bg-color);
    width: 100%;
}

.nav__item {
    display: flex;
    flex-flow: column nowrap;
    justify-content: center;
    position: relative;
    height: var(--nav-height);
    padding: 0;
    opacity: 0;
    transform-origin: top;
    cursor: pointer;
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.nav__item:after {
    content: "";
    position: absolute;
    left: 0;
    top:initial;
    bottom: 0;
    width: 100%;
    height: 0;
    background-color: #fff;
    transform: scale3d(1, 0, 1);
    transform-origin: bottom;
    transition: transform var(--nav-animation) 0s;
}
.nav__item--active.nav__item:after {
    transform: scale3d(1, 1, 1);
    transition: transform var(--nav-animation) 0.4s;
}

.nav__anchor {
    position: relative;
    opacity: 1;
    transform: scale3d(1, 1, 1);
    transition: opacity var(--nav-animation) 0.4s, transform var(--nav-animation) 0.4s, color 0.4s cubic-bezier(0.4, 0.0, 0.2, 1) 0s;
}
.nav__item--active .nav__anchor {
    color: #fff;
    transition: color 0.4s cubic-bezier(0.4, 0.0, 0.2, 1) 0.4s;
}
.nav__anchor--hide {
    opacity: 0;
    transform: scale3d(0, 0, 1);
    transition: opacity var(--nav-animation) 0s, transform var(--nav-animation) 0s;
}

.nav__anchor--absolute-center {
    position: absolute;
    left: 50%;
    top: 50%;
    height: calc(100% - 15px);
    transform: translateX(-50%) translateY(-50%);
}

/* ============================================================== */

/* start page animation section */

.page--animation .nav__item:nth-child(1) {
    animation: nav-item-animation var(--nav-animation) calc(0.5s + var(--nav-animation-delay)) 1 normal forwards;
}
.page--animation .nav__item:nth-child(2) {
    animation: nav-item-animation var(--nav-animation) calc(0.6s + var(--nav-animation-delay)) 1 normal forwards;
}
.page--animation .nav__item:nth-child(3) {
    animation: nav-item-animation var(--nav-animation) calc(0.7s + var(--nav-animation-delay)) 1 normal forwards;
}
.page--animation .nav__item:nth-child(4) {
    animation: nav-item-animation var(--nav-animation) calc(0.8s + var(--nav-animation-delay)) 1 normal forwards;
}
.page--animation .nav__item:nth-child(5) {
    animation: nav-item-animation var(--nav-animation) calc(0.9s + var(--nav-animation-delay)) 1 normal forwards;
}
.page--animation .nav__item:nth-child(6) {
    animation: nav-item-animation var(--nav-animation) calc(1s + var(--nav-animation-delay)) 1 normal forwards;
}
@keyframes nav-item-animation {
    0% {
        opacity: 0;
        transform: scale3d(1, 0, 1);
    }
    100% {
        opacity: 1;
        transform: scale3d(1, 1, 1);
    }
}

.page--animation .nav__item.nav__item:after {
    animation: nav-item-after-animation var(--nav-animation) calc(1.3s + var(--nav-animation-delay)) 1 normal forwards;
}
@keyframes nav-item-after-animation {
    0% {
        height: 0;
    }
    100% {
        height: 5px;
    }
}

/* ============================================================== */

/* media queries section */
/* for portrait */

@media screen and (orientation: portrait) {
    
    @media screen and (max-width: 640px) {
        .nav__list {
            flex-flow: column nowrap;
            justify-content: flex-start;
            align-items: stretch;
        }
        .nav__item {
            padding-left: calc(var(--nav-height) / 2);
            flex: 0 0 var(--nav-height);
        }
        .nav__item:after {
            content: "";
            position: absolute;
            top: 0;
            bottom: initial;
            width: 5px;
            transform: scale3d(0, 1, 1);
            transform-origin: left;
        }

        @keyframes nav-item-after-animation {
            0% {
                height: 0;
            }
            100% {
                height: 100%;
            }
        }
    }
    @media screen and (min-width: 641px) {
        .nav__button {
            display: none !important;
        }
    }
}

/* for landscape */

@media screen and (orientation: landscape) {

    @media screen and (max-width: 799px) {
        .nav__list {
            flex-flow: column wrap;
            justify-content: flex-start;
            align-items: stretch;
            max-height: calc(var(--nav-height) * var(--nav-number-elem-first-column));
            padding: 0 var(--nav-height) 0 0;
            overflow: hidden;
        }
        .nav__item {
            padding-left: calc(var(--nav-height) / 2);
            flex: 0 0 var(--nav-height);
        }
        .nav__item:after {
            content: "";
            position: absolute;
            top: 0;
            bottom: initial;
            width: 5px;
            transform: scale3d(0, 1, 1);
            transform-origin: left;
        }

        @keyframes nav-item-after-animation {
            0% {
                height: 0;
            }
            100% {
                height: 100%;
            }
        }
    }
    @media screen and (min-width: 800px) {
        .nav__button {
            display: none !important;
        }
    }
    @media screen and (max-width: 999px) and (min-aspect-ratio: 2/1) {
        .nav__button {
            display: none !important;
        }
    }
}